# =============================================================================
# === TMUX CONFIGURATION
# =============================================================================

# Set the prefix to C-s
# IMPORTANT: C-s is often used for XOFF (flow control) in terminals, which
# will "freeze" your terminal. To prevent this, add `stty -ixon` to your
# shell's startup file (e.g., ~/.bashrc or ~/.zshrc).
set -g prefix C-s

# Start window and pane numbering from 1 (also set by tmux-sensible).
set -g base-index 1
setw -g pane-base-index 1

# Automatically renumber windows when one is closed.
set -g renumber-windows on

# Increase scrollback history limit.
set -g history-limit 10000

# Notify about activity in other windows.
setw -g monitor-activity on
set -g visual-activity on

# Unbind default keys that are not used or will be re-bound.
unbind r
unbind ""
unbind %

# Reload the tmux configuration with <prefix> r.
bind r source-file ~/.tmux.conf \; display "âœ… Reloaded tmux.conf"

# Split panes using | for vertical and - for horizontal splits.
# They will open in the current working directory of the current pane.
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Navigate between panes using Vim-style keys (h, j, k, l).
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Your original binding to switch windows by index.
bind space command-prompt -p "Switch to window:" "select-window -t '%%'"

# Set the default terminal to support 256 colors for themes.
# Note: This is also handled by the 'tmux-sensible' plugin.
set -g default-terminal "screen-256color"

# Load the Tomorrow theme from your .tmux/themes directory.
# Source: https://github.com/edouard-lopez/tmux-tomorrow
source-file ~/.tmux/themes/tomorrow.tmux

set -g mouse on

# How to use TPM:
# 1. Clone TPM: `git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm`
# 2. Add plugins to the list below.
# 3. Press `<prefix>I` inside tmux to install plugins.
# 4. Press `<prefix>U` to update, `<prefix>alt-u` to remove.

# Automatically installs TPM if it's not already present.
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"

set -g @plugin 'tmux-plugins/tpm'
# Provides a set of sensible tmux options. Recommended to keep this first.
set -g @plugin 'tmux-plugins/tmux-sensible'
# Plugin for running cargo commands (for Rust development).
set -g @plugin 'idevtier/tmux-cargo'
# Plugin for logging pane content to a file.
set -g @plugin 'tmux-plugins/tmux-logging'
# Plugin saves and restores tmux sessions.
set -g @plugin 'tmux-plugins/tmux-resurrect'

# IMPORTANT: This line must be at the very bottom of the file.
run -b '~/.tmux/plugins/tpm/tpm'
